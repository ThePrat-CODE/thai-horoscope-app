import streamlit as st
import swisseph as swe
import datetime
import pytz

st.set_page_config(page_title="‡πÄ‡∏ä‡πá‡∏Å‡∏î‡∏ß‡∏á‡πÑ‡∏ó‡∏¢", layout="centered")

st.title("üîÆ ‡πÄ‡∏ä‡πá‡∏Å‡∏î‡∏ß‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏î‡∏ß‡∏á‡πÅ‡∏ö‡∏ö‡πÑ‡∏ó‡∏¢")
st.markdown("‡∏Å‡∏£‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏û‡∏∑‡πâ‡∏ô‡∏î‡∏ß‡∏á‡∏ï‡∏≤‡∏°‡πÇ‡∏´‡∏£‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÑ‡∏ó‡∏¢")

# ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
col1, col2 = st.columns(2)
with col1:
   birth_date = st.date_input(
    "üìÖ ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î",
    value=datetime.date(1995, 1, 1),
    min_value=datetime.date(1900, 1, 1),
    max_value=datetime.date.today()
)
with col2:
    birth_time = st.time_input("üï∞Ô∏è ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡∏¥‡∏î")

province = st.text_input("üìç ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î (‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î)", value="‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û")

# ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤
timezone = pytz.timezone("Asia/Bangkok")
birth_datetime = datetime.datetime.combine(birth_date, birth_time)
birth_datetime_utc = timezone.localize(birth_datetime).astimezone(pytz.utc)

# ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Julian Day
jd = swe.julday(birth_datetime_utc.year, birth_datetime_utc.month,
                birth_datetime_utc.day, birth_datetime_utc.hour +
                birth_datetime_utc.minute / 60)

# ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û (‡∏à‡∏∏‡∏î‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á)
swe.set_topo(100.5018, 13.7563)

st.subheader("üßò‚Äç‚ôÇÔ∏è ‡∏û‡∏∑‡πâ‡∏ô‡∏î‡∏ß‡∏á‡∏¢‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì")

# ‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)
thai_days = ["‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå", "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£", "‡∏û‡∏∏‡∏ò", "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ", "‡∏®‡∏∏‡∏Å‡∏£‡πå", "‡πÄ‡∏™‡∏≤‡∏£‡πå", "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå"]
birth_day = thai_days[birth_date.weekday()]

# ‡∏ò‡∏≤‡∏ï‡∏∏‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î
day_elements = {
    "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå": "‡πÑ‡∏ü",
    "‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå": "‡∏ô‡πâ‡∏≥",
    "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£": "‡πÑ‡∏ü",
    "‡∏û‡∏∏‡∏ò": "‡∏î‡∏¥‡∏ô",
    "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ": "‡πÑ‡∏ü",
    "‡∏®‡∏∏‡∏Å‡∏£‡πå": "‡∏ô‡πâ‡∏≥",
    "‡πÄ‡∏™‡∏≤‡∏£‡πå": "‡∏î‡∏¥‡∏ô"
}
element = day_elements.get(birth_day, "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏")

# ‡∏£‡∏≤‡∏®‡∏µ‡∏à‡∏≤‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå
sun_pos, _ = swe.calc_ut(jd, swe.SUN)
sun_sign = int(sun_pos[0] // 30)
thai_rasi = ["‡πÄ‡∏°‡∏©", "‡∏û‡∏§‡∏©‡∏†", "‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô", "‡∏Å‡∏£‡∏Å‡∏é", "‡∏™‡∏¥‡∏á‡∏´‡πå", "‡∏Å‡∏±‡∏ô‡∏¢‡πå",
             "‡∏ï‡∏∏‡∏•", "‡∏û‡∏¥‡∏à‡∏¥‡∏Å", "‡∏ò‡∏ô‡∏π", "‡∏°‡∏Å‡∏£", "‡∏Å‡∏∏‡∏°‡∏†‡πå", "‡∏°‡∏µ‡∏ô"]
sun_rasi = thai_rasi[sun_sign]

# ‡∏à‡∏∏‡∏î‡πÅ‡∏Ç‡πá‡∏á‚Äì‡∏à‡∏∏‡∏î‡∏≠‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏á‡πà‡∏≤‡∏¢)
strengths = {
    "‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå": "‡∏≠‡πà‡∏≠‡∏ô‡πÇ‡∏¢‡∏ô ‡πÉ‡∏à‡∏î‡∏µ ‡∏°‡∏µ‡πÄ‡∏™‡∏ô‡πà‡∏´‡πå",
    "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£": "‡∏Å‡∏•‡πâ‡∏≤‡∏´‡∏≤‡∏ç ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡πÅ‡∏û‡πâ",
    "‡∏û‡∏∏‡∏ò": "‡∏â‡∏•‡∏≤‡∏î ‡∏ä‡πà‡∏≤‡∏á‡∏û‡∏π‡∏î ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏Å‡πà‡∏á",
    "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ": "‡∏°‡∏µ‡πÄ‡∏°‡∏ï‡∏ï‡∏≤ ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏≠‡∏ö ‡∏£‡∏±‡∏Å‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß",
    "‡∏®‡∏∏‡∏Å‡∏£‡πå": "‡∏£‡∏±‡∏Å‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏á‡πà‡∏≤‡∏¢",
    "‡πÄ‡∏™‡∏≤‡∏£‡πå": "‡∏≠‡∏î‡∏ó‡∏ô ‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏ô‡πà‡∏ô ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏¢‡∏≤‡∏ß",
    "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå": "‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥ ‡∏°‡∏µ‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏ô‡∏ï‡∏±‡∏ß"
}

weaknesses = {
    "‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå": "‡∏•‡∏±‡∏á‡πÄ‡∏• ‡∏≠‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏á‡πà‡∏≤‡∏¢",
    "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£": "‡∏´‡∏±‡∏ß‡∏£‡πâ‡∏≠‡∏ô ‡πÉ‡∏à‡∏£‡πâ‡∏≠‡∏ô",
    "‡∏û‡∏∏‡∏ò": "‡∏Ç‡∏µ‡πâ‡∏Å‡∏±‡∏á‡∏ß‡∏• ‡∏û‡∏π‡∏î‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ",
    "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ": "‡∏´‡∏±‡∏ß‡πÇ‡∏ö‡∏£‡∏≤‡∏ì ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ä‡πâ‡∏≤",
    "‡∏®‡∏∏‡∏Å‡∏£‡πå": "‡∏´‡∏•‡∏á‡πÉ‡∏´‡∏•‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ ‡πÇ‡∏•‡πÄ‡∏•‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å",
    "‡πÄ‡∏™‡∏≤‡∏£‡πå": "‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏î ‡πÄ‡∏Ñ‡∏£‡πà‡∏á‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î",
    "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå": "‡∏´‡∏¢‡∏¥‡πà‡∏á ‡∏î‡∏∑‡πâ‡∏≠‡∏£‡∏±‡πâ‡∏ô"
}

# ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
st.markdown(f"""
- üóìÔ∏è ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡∏¥‡∏î‡∏ß‡∏±‡∏ô **{birth_day}**
- üî• ‡∏ò‡∏≤‡∏ï‡∏∏‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß: **{element}**
- üåû ‡∏£‡∏≤‡∏®‡∏µ‡∏ó‡∏µ‡πà‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏™‡∏ñ‡∏¥‡∏ï‡∏≠‡∏¢‡∏π‡πà: **‡∏£‡∏≤‡∏®‡∏µ {sun_rasi}**
- üí™ ‡∏à‡∏∏‡∏î‡πÅ‡∏Ç‡πá‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: _{strengths[birth_day]}_
- ‚ö†Ô∏è ‡∏à‡∏∏‡∏î‡∏≠‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á: _{weaknesses[birth_day]}_
""")

# ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏î‡∏≤‡∏ß‡∏û‡∏∑‡πâ‡∏ô‡∏î‡∏ß‡∏á
planets = {
    "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå (Sun)": swe.SUN,
    "‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå (Moon)": swe.MOON,
    "‡∏û‡∏∏‡∏ò (Mercury)": swe.MERCURY,
    "‡∏®‡∏∏‡∏Å‡∏£‡πå (Venus)": swe.VENUS,
    "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£ (Mars)": swe.MARS,
    "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ (Jupiter)": swe.JUPITER,
    "‡πÄ‡∏™‡∏≤‡∏£‡πå (Saturn)": swe.SATURN,
    "‡∏£‡∏≤‡∏´‡∏π (Rahu)": swe.TRUE_NODE
}

st.subheader("üåü ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏î‡∏≤‡∏ß‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì")
# ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡πÉ‡∏ô‡πÄ‡∏Ç‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏ó‡∏¢)
thai_weekdays = ["‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå", "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£", "‡∏û‡∏∏‡∏ò", "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ", "‡∏®‡∏∏‡∏Å‡∏£‡πå", "‡πÄ‡∏™‡∏≤‡∏£‡πå", "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå"]
today = datetime.datetime.now(pytz.timezone("Asia/Bangkok"))
today_weekday = thai_weekdays[today.weekday()]

# ‡∏™‡∏µ‡∏°‡∏á‡∏Ñ‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á
lucky_colors = {
    "‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå": "‡∏Ç‡∏≤‡∏ß, ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á",
    "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£": "‡∏ä‡∏°‡∏û‡∏π",
    "‡∏û‡∏∏‡∏ò": "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß",
    "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ": "‡∏™‡πâ‡∏°, ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á",
    "‡∏®‡∏∏‡∏Å‡∏£‡πå": "‡∏ü‡πâ‡∏≤, ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô",
    "‡πÄ‡∏™‡∏≤‡∏£‡πå": "‡∏°‡πà‡∏ß‡∏á, ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°",
    "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå": "‡πÅ‡∏î‡∏á"
}

unlucky_colors = {
    "‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå": "‡πÅ‡∏î‡∏á",
    "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£": "‡∏Ç‡∏≤‡∏ß",
    "‡∏û‡∏∏‡∏ò": "‡∏ä‡∏°‡∏û‡∏π",
    "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ": "‡∏°‡πà‡∏ß‡∏á",
    "‡∏®‡∏∏‡∏Å‡∏£‡πå": "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß",
    "‡πÄ‡∏™‡∏≤‡∏£‡πå": "‡∏™‡πâ‡∏°",
    "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå": "‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô"
}

st.write(f"‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏ß‡∏±‡∏ô **{today_weekday}**")
st.success(f"üé® ‡∏™‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏°‡∏á‡∏Ñ‡∏•‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ: {lucky_colors[today_weekday]}")
st.error(f"‚õî ‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á: {unlucky_colors[today_weekday]}")

st.subheader("üìÖ ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏™‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å")

selected_date = st.date_input("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏™‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠", value=datetime.date.today())
selected_weekday = selected_date.weekday()  # 0 = Monday, 6 = Sunday

thai_weekdays = ["‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå", "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£", "‡∏û‡∏∏‡∏ò", "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ", "‡∏®‡∏∏‡∏Å‡∏£‡πå", "‡πÄ‡∏™‡∏≤‡∏£‡πå", "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå"]
day_name = thai_weekdays[selected_weekday]

lucky_colors = {
    "‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå": "‡∏Ç‡∏≤‡∏ß, ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á",
    "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£": "‡∏ä‡∏°‡∏û‡∏π",
    "‡∏û‡∏∏‡∏ò": "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß",
    "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ": "‡∏™‡πâ‡∏°, ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á",
    "‡∏®‡∏∏‡∏Å‡∏£‡πå": "‡∏ü‡πâ‡∏≤, ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô",
    "‡πÄ‡∏™‡∏≤‡∏£‡πå": "‡∏°‡πà‡∏ß‡∏á, ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°",
    "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå": "‡πÅ‡∏î‡∏á"
}

unlucky_colors = {
    "‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå": "‡πÅ‡∏î‡∏á",
    "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£": "‡∏Ç‡∏≤‡∏ß",
    "‡∏û‡∏∏‡∏ò": "‡∏ä‡∏°‡∏û‡∏π",
    "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ": "‡∏°‡πà‡∏ß‡∏á",
    "‡∏®‡∏∏‡∏Å‡∏£‡πå": "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß",
    "‡πÄ‡∏™‡∏≤‡∏£‡πå": "‡∏™‡πâ‡∏°",
    "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå": "‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô"
}

st.write(f"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏ß‡∏±‡∏ô **{day_name}**")
st.success(f"üé® ‡∏™‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏°‡∏á‡∏Ñ‡∏•: {lucky_colors[day_name]}")
st.error(f"‚õî ‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á: {unlucky_colors[day_name]}")

for name, code in planets.items():
    pos, _ = swe.calc_ut(jd, code)
    degree = pos[0] % 30
    sign = int(pos[0] // 30)
    rasi = ["‡πÄ‡∏°‡∏©", "‡∏û‡∏§‡∏©‡∏†", "‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô", "‡∏Å‡∏£‡∏Å‡∏é", "‡∏™‡∏¥‡∏á‡∏´‡πå", "‡∏Å‡∏±‡∏ô‡∏¢‡πå",
            "‡∏ï‡∏∏‡∏•", "‡∏û‡∏¥‡∏à‡∏¥‡∏Å", "‡∏ò‡∏ô‡∏π", "‡∏°‡∏Å‡∏£", "‡∏Å‡∏∏‡∏°‡∏†‡πå", "‡∏°‡∏µ‡∏ô"]
    st.write(f"- {name} ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà {degree:.2f}¬∞ ‡∏£‡∏≤‡∏®‡∏µ {rasi[sign]}")

from collections import defaultdict

st.subheader("üß≠ ‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏î‡∏≤‡∏ß‡∏û‡∏∑‡πâ‡∏ô‡∏î‡∏ß‡∏á (Birth Chart)")

# ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏®‡∏µ‡πÑ‡∏ó‡∏¢ 12 ‡∏£‡∏≤‡∏®‡∏µ
rasi_names = ["‡πÄ‡∏°‡∏©", "‡∏û‡∏§‡∏©‡∏†", "‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô", "‡∏Å‡∏£‡∏Å‡∏é", "‡∏™‡∏¥‡∏á‡∏´‡πå", "‡∏Å‡∏±‡∏ô‡∏¢‡πå",
              "‡∏ï‡∏∏‡∏•", "‡∏û‡∏¥‡∏à‡∏¥‡∏Å", "‡∏ò‡∏ô‡∏π", "‡∏°‡∏Å‡∏£", "‡∏Å‡∏∏‡∏°‡∏†‡πå", "‡∏°‡∏µ‡∏ô"]

# ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° dict ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏î‡∏≤‡∏ß‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏®‡∏µ
birth_chart = defaultdict(list)

# ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏î‡∏≤‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏≤‡∏®‡∏µ
for name, code in planets.items():
    pos, _ = swe.calc_ut(jd, code)
    sign = int(pos[0] // 30)
    degree = pos[0] % 30
    birth_chart[sign].append(f"{name} ({degree:.2f}¬∞)")

# ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏ö‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
for i in range(12):
    rasi = rasi_names[i]
    planets_in_rasi = ", ".join(birth_chart[i]) if birth_chart[i] else "‚Äì"
    st.markdown(f"**‡∏£‡∏≤‡∏®‡∏µ {rasi}**: {planets_in_rasi}")
